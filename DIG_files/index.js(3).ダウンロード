Util.preRegisterComponent("DayView"),Util.loadCssInline("/components/DayView/style.css",".day-view-page {\nbackground-color: var(--color__bg--dark);\nmin-height: 100%;\nflex: 1;\n}\n.page__header--day-view {\ndisplay: flex;\nflex-direction: column;\n}\n.activity-container--instructor-only {\nposition: relative;\nmargin-top: 24px;\n}\n.activity--missing {\nbackground-color: #fbd;\nword-break: break-word;\n}\n.activity__tag--instructor-only {\nposition: absolute;\nbackground-color: var(--brand-color__tertiary);\nleft: -6px;\ntop: -16px;\nmargin: 0 2px;\npadding: 3px 8px;\n}\n.add-block-button {\nheight: 40px;\nwidth: 60%;\nalign-self: center;\nmargin: 20px 0 10px 0;\n}"),StringTable.addScopedStrings("en","COMPONENT_DAYVIEW",{INSTRUCTOR_ONLY:"Instructor Only",BLOCK_VIEW_BACK_TO_CALENDAR:"Back to calendar view",BLOCK_START_TIME:"Start time",BLOCK_END_TIME:"End time",BLOCK_BREAK:"Break",BLOCK_BREAK_MINUTES:"{0}-minute break",UNRELEASED_MSG_TO_INSTRUCTOR:"This block is not released yet.",BLOCK_LABEL_HW:"Homework",BLOCK_LABEL_REF:"Reference",BLOCK_LABEL_SUMMARY:"Summary",BLOCK_LABEL_PREREQ:"Pre-requisites",BLOCK_LABEL_EXTRA:"Extra",NO_BLOCKS_EXPLAIN:"The instructor has not released the content for this day."})("ja","COMPONENT_DAYVIEW",{BLOCK_VIEW_BACK_TO_CALENDAR:"カレンダーに戻る",BLOCK_START_TIME:"開始時刻",BLOCK_BREAK:"休",BLOCK_BREAK_MINUTES:"休: {0}分",BLOCK_LABEL_HW:"宿題",BLOCK_LABEL_REF:"Reference",BLOCK_LABEL_SUMMARY:"復習",BLOCK_LABEL_PREREQ:"Pre-requisites",BLOCK_LABEL_EXTRA:"Extra",INSTRUCTOR_ONLY:"教師のため",BLOCK_END_TIME:"終了時刻",UNRELEASED_MSG_TO_INSTRUCTOR:"このレッスンは、インストラクターによってまだリリースされていません。",NO_BLOCKS_EXPLAIN:"このレッスンは、インストラクターによってまだリリースされていません。"}),(async()=>{const{Button:L,Div:d,Link:E,H1:T,H2:m,LocDate:C,LocTime:p,Span:B}=HTML,O=HTML.LocText.forComponentScope("DayView"),u=HTML.LocTextDynamic.forComponentScope("DayView");await Promise.all([Util.loadComponent("LessonItemTile"),Util.loadComponent("ProfilePhoto"),Util.loadComponent("NameTile"),Util.loadComponent("IconTile")]),Util.registerComponentWithCss("DayView",e=>{let{ok:t,cohort:i,blocks:n,dayId:o,error:a,isAsync:s}=e;if(!t)return d("ERROR: "+a);let r=(t,i)=>{for(var e=[...i.activities],n=[];e.length&&"BREAK"===e[e.length-1].type;)n.push(e.pop());n.reverse();var o=m.css("block__heading")(i.timeSlot.isFixedTime?[O("BLOCK_START_TIME"),B(": "),p({hour:i.timeSlot.hour,minute:i.timeSlot.minute}),i.timeSlot.includeEnd?[B(", "),O("BLOCK_END_TIME"),B(": "),p({hour:i.timeSlot.endHour,minute:i.timeSlot.endMinute})]:null]:O("BLOCK_LABEL_"+i.timeSlot.label));return d.css("block-container")(d(UserStore.isAdmin()?E({position:"relative",top:"2px",right:"-12px",width:"40px",float:"right",textDecoration:"none",navigate:`/admin/blockedit/${t}/`+i.id},Components.IconTile("pencil",{color:"white",scale:.1})):null,s?m.css("block__heading")(HTML.LocText(i.timeSlot.isFixedTime?"LESSON_MATERIALS":"LESSON_VIDEOS")):o,(o=i.instructors).length?d.css("instructors-list")(o.map(e=>Components.NameTile(e))):[],i.isHidden?d.css("block-container--unreleased")(O("UNRELEASED_MSG_TO_INSTRUCTOR")):null,d.css("activities-list")(e.map(e=>l(t,i,e)))),n.map(e=>l(t,i,e).set({marginLeft:0,marginRight:0})))},l=(e,t,i)=>{let n;switch(i.type){case"FILE":if(i.missing)return d.css("activity","activity--missing")(i.title);var o=`/view/${e}/${t.id}/`+i.id;n=Components.LessonItemTile(i.icon,i.title,o,!1,i.id);break;case"LINK":n=d.css("activity")(E.css("activity__title")({href:i.url},i.label||i.url));break;case"TEXT":n=d.css("activity")({html:i.html});break;case"BREAK":n=Components.LessonItemTile(i.icon,i.duration?u("BLOCK_BREAK_MINUTES",[i.duration]):O("BLOCK_BREAK"),null,!0)}return i.hidden?d.css("activity-container--instructor-only")(d.css("activity__tag","activity__tag--instructor-only")(O("INSTRUCTOR_ONLY")),n.set({class:"activity--instructor-only"})):n};var c,_;return HTML.scrollWrap(d.css("day-view-page")(d.css("page__header","page__header--day-view")(T.css("page__title")(i.name),m.css("page__subtitle")(s?HTML.LocTextDynamic("LESSON_TITLE",[Util.asyncCohortDateIdToLessonNum(o)]):C(o)),d.css("page__backlink")(E(O("BLOCK_VIEW_BACK_TO_CALENDAR"),{navigate:"/cohort/"+i.id})),(c=i.id,_=o,UserStore.isAdmin()?L.css("add-block-button")("Add Block",async()=>{await Util.loadComponent("AddCohortBlockMenu"),await LayoutEngine.createFloatWindowPrompt(Components.AddCohortBlockMenu(c,_),{includeClose:!1,headerText:"Add block"})}):null)),d.css("block-list")(n.map(e=>r(i.id,e))),n.length?null:d(O("NO_BLOCKS_EXPLAIN"))))})})();